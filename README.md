# 银行黑灰产可视化系统

## 项目概述
本项目面向银行黑灰产风险分析场景，提供账户关系网络的可视化分析能力。通过前端加载 CSV 数据构建节点与边，支持在账户列表、账户详情以及大图分析中进行筛选、追踪、规则应用与导出，帮助快速识别高风险账户与异常交易路径。

- 技术栈：`Vue 3`、`Vue Router`、`Element Plus`、`D3.js`、`Vite`
- 数据源：
  - 节点：`/src/data/frontend_nodes_ext_filtered_by_edges.csv`（使用字段 `id`）
  - 边：`/src/data/frontend_edges_ext.csv`（使用字段 `source`、`target`）
- 路由入口：
  - 大图分析：`/graph`
  - 账户列表：`/account_list`
  - 规则管理：`/rules`
  - 账户详情：`/account/:id`

## 核心功能模块
- 账户列表（`src/views/AccountList.vue`）
  - 条件筛选：`账户ID`、`团伙标签`、`是否核心（是/否）`、`风险等级（高/中/低，按 0~1 分段）`
  - 风险分排序：升序/降序按钮控制
  - 标签展示：账户类型/核心账户/团伙标签多色映射
  - 导出 CSV：导出当前筛选结果（含 BOM 与特殊字符转义）
  - 查看详情：点击行或“查看详情”跳转到账户详情页

- 账户详情（`src/views/AccountDetail.vue`）
  - 左右布局：左侧基础信息，右侧关联交易图谱
  - 基础信息字段：`账户ID(id)`、`团伙ID`、`风险等级`、`风险分`、`净流出金额`、`出入账金额比`、`PageRank`、`入度`、`出度`、`加权出度`
  - 关联交易图谱：
    - 用节点 CSV 的 `id` 精确匹配当前账户
    - 从边 CSV 中筛选 `source/target === id` 的真实关联交易进行渲染
    - 节点颜色编码：当前账户（红）、核心账户（绿）、关联账户（蓝）
    - 节点点击在同标签打开详情（可正常返回列表）
  - 返回按钮：统一跳转到账户列表页 `/account_list`（非浏览器历史返回）

- 大图分析（`src/views/GraphView.vue`）
  - 控制面板：置于画布左上角，包含金额过滤、时间筛选、路径追踪、规则应用与重置视图
  - 交互：
    - 选中节点/边高亮，展示相应详情侧栏（账户与交易信息）
    - 批量高亮符合条件的交易边，并提示匹配数量
    - 点击空白画布可清除选中状态并恢复默认
  - 可视化风格：暗色主题、网格底纹、风险感知的颜色/描边样式

- 规则管理（`src/views/RulesList.vue`）
  - 路由已配置，可扩展规则维护界面（当前规则交互集中于 `GraphView` 控制面板）

## 使用方法
- 环境要求
  - `Node.js >= 18`
  - 包管理工具：`npm` 或 `pnpm` 或 `yarn`

- 安装依赖
  - 在项目根目录执行：
    - `npm install`

- 开发运行
  - 启动开发服务器：
    - `npm run dev`
  - 浏览器访问：`http://localhost:3000/`（具体端口以终端输出为准）

- 数据更新
  - 节点数据文件：`/src/data/frontend_nodes_ext_filtered_by_edges.csv`（必须包含 `id` 字段）
  - 边数据文件：`/src/data/frontend_edges_ext.csv`（必须包含 `source`、`target` 字段）
  - 替换 CSV 后刷新页面即可看到最新数据；图谱和列表使用 `id` 作为主键进行匹配与展示

- 常见操作
  - 在“账户列表”筛选目标账户，点击行进入“账户详情”
  - 在“账户详情”的关联交易图谱中点击关联节点，查看其详情；点击“Back”返回“账户列表”
  - 在“大图分析”中使用控制面板进行金额/时间筛选、路径追踪与规则应用，高亮结果并查看侧栏详情
  - 在“账户列表”中导出当前筛选结果为 CSV

- 注意事项
  - 图谱严格使用节点 CSV 的 `id` 字段进行匹配与展示，避免使用 `acct_id`
  - 边筛选以 `source/target` 为准；请确保两者与节点 `id` 一致
  - 若 CSV 中存在空格或空值，系统会自动规范化与兜底，但建议提供干净数据以获得最佳展示效果